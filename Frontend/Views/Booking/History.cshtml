@model IEnumerable<Frontend.Models.History>

@{

    Layout = "_BookingLayout";
    var tempDay = "";
}
<div class="column mid">
    @foreach (var item in Model)
    {
        if (item.rentTime.ToString("dd/MM/yyyy") != tempDay)
        {
            tempDay = item.rentTime.ToString("dd/MM/yyyy");
            <h3 class="date">วันที่จอง : @item.rentTime.ToString("dd/MM/yyyy")</h3>
            <div class="panel">
            @foreach (var rest in Model)
            {
                if (rest.rentTime.ToString("dd/MM/yyyy") == tempDay)
                {
                <div class="content-row">
                    <div class="equipment">@rest.toolName</div>
                    <div class="time">@rest.rentTime.ToString("HH:mm") น. - @rest.rentTime.ToString("HH:mm") น.</div>
                    <div class=button1>
                        @if(rest.lendTime == null){
                            <div class="restore">
                                <button class="restorebtn">คืนอุปกรณ์</button>
                            </div>
                        }else{
                            <div class="restored">คืนอุปกรณ์แล้ว</div>
                        }
                    </div>
                    <div class=button2>
                        @if(rest.lendTime == null && DateTime.Compare(DateTime.Now, item.rentTime) < 0){
                            <div class="cancel">
                                <button class="cancelbtn">ยกเลิกการจอง</button>
                            </div>
                        }else if(rest.lendTime == null && DateTime.Compare(DateTime.Now, item.rentTime) > 0){
                            <div class="overdue">เกินเวลา</div>
                        }else{
                            <div class="restored">ตรงเวลา</div>
                        }
                    </div>
                </div>
                }
            }
            </div>
        }
    }
</div>